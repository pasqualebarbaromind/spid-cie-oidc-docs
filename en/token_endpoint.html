<!DOCTYPE html>
<html lang="en" class="no-js" prefix="og: http://ogp.me/ns#">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SPID/CIE OIDC - Regole Tecniche version: latest documentation | Token Endpoint</title>

  <!-- Styles -->
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css">
  <link rel="stylesheet" href="_static/pygments.css" type="text/css">

  <!-- Relations -->
  <link rel="index" title="Index" href="index.html">
  <link rel="top" title="SPID/CIE OIDC - Regole Tecniche version: latest documentation" href="index.html">
  <link rel="next" title="UserInfo Endpoint" href="userinfo_endpoint.html">
  <link rel="prev" title="Authorization endpoint" href="authorization_endpoint.html">

  
  
  <!-- No Index - keep if out of docs.italia.it -->
  
  <meta name="robots" content="noindex, nofollow">
  
</head>

<body class="docs-italia">
  <script>
	if (document.location.href.indexOf('?payload=') >= 0)
		document.body.className += ' loading';
</script>
  <header class="container-fluid container-fluid--desktop px-0 header">
  <nav class="navbar navbar-expand-lg primary-bg-a7 navbar-dark slim-header justify-content-start p-0 pl-lg-4 pr-lg-5">
    <span class="navbar-brand ml-4"><a class="text-white" href="https://www.agid.gov.it">AGID</a> + <a class="text-white" href="https://teamdigitale.governo.it">Team Digitale</a></span>
    <button class="navbar-toggler collapsed text-white px-2 py-0 mr-3"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation">
    <span class="navbar__icon it-expand my-auto ml-1"></span></button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="http://pianotriennale-ict.italia.it">Piano Triennale</a>
        </li>
        <li role="separator" class="nav-item divider ml-lg-0 ml-3"></li>
        <li class="nav-item nav-text px-lg-2 pl-3 d-lg-none ">
          <span class="nav-text text-uppercase text-white">Communities</span>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://developers.italia.it">Developers</a>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://designers.italia.it">Designers</a>
        </li>
        <li role="separator" class="nav-item divider ml-lg-0 ml-3"></li>
        <li class="nav-item nav-text px-lg-2 pl-3 d-lg-none ">
          <span class="nav-text text-uppercase text-white">Tools</span>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://forum.italia.it">Forum</a>
        </li>
        <li class="nav-item px-lg-2 pl-3 active">
          <a class="nav-link" href="https://docs.italia.it">Docs</a>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://github.com/italia">GitHub</a>
        </li>
      </ul>
    </div>
    
    <div class="ml-auto">
      
    </div>
  </nav>

  <div class="row p-4 px-lg-5 m-0 bg-primary--dark align-items-center">
    <div class="row w-100">
      <div class="logo--header">
        <a href="/" tabindex="-1" aria-hidden="true" class="d-block">
          <svg class="svg--header align-bottom" xmlns="http://www.w3.org/2000/svg" height="78.187" width="97.387" viewBox="0 0 91.300002 73.300002"><g fill="#fff"><path d="M31.799 71.9V15.7h15.1V72h-15.1zM91.099 28.5h-13.8v23.1c0 2.3.1 3.8.2 4.8.1.9.5 1.7 1.2 2.4s1.8 1 3.3 1l8.6-.2.7 12c-5 1.1-8.9 1.7-11.5 1.7-6.8 0-11.4-1.5-13.8-4.6-2.5-3-3.7-8.6-3.7-16.8V0h15.1v15.6h13.8v12.9zM9.099 32.8c-2.6 0-4.8-.9-6.5-2.7s-2.6-4-2.6-6.6.9-4.8 2.5-6.6c1.7-1.8 3.9-2.6 6.5-2.6s4.8.9 6.5 2.7 2.5 4 2.5 6.7-.8 4.8-2.5 6.6c-1.6 1.6-3.7 2.5-6.4 2.5z"/></g></svg>
        </a>
      </div>
      <div class="col pl-3 pl-sm-4">
        <h1 class="h1--header mb-1">
          <a href="/" class="site-title text-white">
            Docs Italia
            
              <span class="badge badge-pill bg-primary--mid-dark align-middle">beta</span>
            
          </a>
        </h1>
        <h2 class="text-white mb-0 h2--header">Public documents, made digital.</h2>
      </div>
    </div>
    <div class="row mt-4 w-100 docs__document-info">
      <div class="col-md-6">
        <i class="docs-icon-document docs__document-info__icon"></i>
        <a href="index.html" class="text-white font-weight-normal">
          SPID/CIE OIDC - Regole Tecniche version: latest documentation
        </a>
      </div>
      <div class="docs__document-info__ownership col-md-5 offset-md-1 mt-3 mt-md-0">
        
        <div class="w-100">
          <i class="docs-icon-project docs__document-info__icon"></i>
          <span class="docs__document-info__label ml-1">Project:</span>
          <a href="/organizzazione-demo/progetto-demo" class="text-white font-weight-normal">
            <u>Progetto demo</u>
          </a>
        </div>
        
        
        <div class="w-100 mt-1">
          <i class="docs-icon-publisher docs__document-info__icon"></i>
          <span class="docs__document-info__label ml-1">Administration:</span>
          <a href="/organizzazione-demo/" class="text-white font-weight-normal">
            <u>Organizzazione demo</u>
          </a>
        </div>
        
      </div>
    </div>
  </div>
</header>
<div class="doc-header container-fluid container-fluid--desktop bg-white">
  <div class="row py-3 px-4 px-lg-5 align-items-center flex-nowrap justify-content-between">
    <div class="col-auto d-md-none d-flex align-items-center order-1">
      <a href="#" class="btn p-2" role="button" id="searchbox-toggle" data-toggle="collapse" data-target="#searchbox" aria-controls="searchbox" aria-expanded="false" aria-label="Toggle searchbox">
        <span class="docs-icon-search d-inline-block">
          <span class="sr-only">Search in Document</span>
        </span>
      </a>
    </div>
    <div class="col-3 d-none d-md-flex pl-0">
      
  <div class="w-100" role="search">
    <form class="mr-md-3" id="rtd-search-form" action="search.html" method="get">
      <div class="input-group" role="search">
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
        <input type="text" class="p-2 text-grey form-control" style="" required="" id="cerca" name="q" placeholder="Search in Document...">
				<span class="input-group-append">
					<button type="submit" class="btn btn-default text-primary px-3 py-2" role="search">
            <span class="docs-icon-search d-block my-auto">
							<span class="sr-only">Search in Document</span>
						</span>
					</button>
				</span>
			</div>
    </form>
  </div>
    </div>
    <div class="col-auto d-flex align-items-center justify-content-center flex-md-grow-1 order-0 order-md-1 pl-0">
      
      <a href="#" role="button" class="btn p-2" data-toggle="modal" data-target="#document-info">
        <span class="docs-icon-info"></span>
        <span class="d-none d-md-inline align-middle">About this document</span>
      </a>
      
    </div>
    <div class="col-4 col-sm-auto d-flex flex-md-grow-1 align-items-center justify-content-center order-1">
      <div id="rst-menu" class="px-2">
        <div class="dropdown" id="version-list">
            <button class="btn btn-primary dropdown-toggle badge badge-pill bg-primary text-nowrap px-3 py-2" type="button" id="dropdownVersionButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="current-version">bozza</span>
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownVersionButton">
              <div class="version-list-wrapper"></div>
            </div>
        </div>
      </div>
    </div>
    <div class="col-auto d-none d-md-flex flex-grow-1 align-items-center order-1">
      <div class="document-actions d-flex flex-column flex-md-row justify-content-around w-100 p-2 p-md-0 text-blue">
  <div class="dropdown p-3 px-md-2 py-md-0 d-flex flex-wrap">
    <a class="btn dropdown-toggle p-2 flex-grow-1 text-left" href="#" id="downloads-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="docs-icon-download align-middle"></span>
      <span class="align-middle">Download</span>
    </a>
    <div class="dropdown-menu w-100" aria-labelledby="downloads-dropdown" aria-disabled="false">
      <div class="link-list-wrapper">
        <ul class="link-list">
          
        </ul>
      </div>
    </div>
  </div>
  
  
  
  <div class="p-3 px-md-2 py-md-0">
    <a href="#" role="button" class="btn p-2 disabled" aria-disabled="true">
        <span class="docs-icon-github"></span>
        <span class="align-middle">Source</span>
    </a>
  </div>
</div>
    </div>
    
    <div class="col-auto pr-0 d-md-none d-flex align-items-center justify-content-end order-1">
      <a href="#" role="button" class="btn py-2 px-0" data-toggle="modal" data-target="#document-actions">
        <span class="docs-icon-more"></span>
        <span class="sr-only">Actions</span>
      </a>
    </div>
  </div>
  <div class="row">
    <div class="progress-container">
      <div class="progress-bar" id="scrollprogressBar"></div>
    </div>
  </div>
</div>

	<!--
  Forum Italia comments templates
-->

<script id="forum-italia-comments" type="text/template">
  <div class="block-comments" id="accordion-comments-{{ topicId }}" data-topic="{{ topicId }}">
    <!-- Top header -->
    <div class="block-comments__header d-flex border-top border-bottom border-width-2 pt-3 pb-3 align-items-center justify-content-between">
      <h6 class="col-auto text-uppercase mb-0">{{ commentsCount }} Commenti</h6>
      <button class="col-auto block-comments__toggle-btn rounded-circle border border-medium-blue border-width-2 collapsed" data-toggle="collapse" data-target="#comments-{{ topicId }}" aria-expanded="false">
        <span class="docs-icon-plus"></span>
        <span class="docs-icon-minus"></span>
      </button>
    </div>
  </div>
  <div class="block-comments__body collapse" data-parent="#accordion-comments-{{ topicId }}" id="comments-{{ topicId }}">
    <!-- Input row -->
    <div class="d-flex align-items-center mb-4 block-comments__input">
      <div class="box-comment {{ canPost }}" data-topic="{{ topicId }}"></div>
    </div>
    <div class="row">
      <div class="block-comments__container col">
        <div class="row mt-4">
          <ul class="block-comments__list col items mb-0" id="accordion-comment-item" data-topic="{{ topicId }}"></ul>
        </div>
      </div>
    </div>
    <div class="block-comments__header d-flex border-bottom border-width-2 pt-3 pb-3 mb-4 align-items-center justify-content-end">
      <button class="col-auto block-comments__toggle-btn rounded-circle border border-medium-blue border-width-2 collapsed" data-toggle="collapse" data-target="#comments-{{ topicId }}" aria-expanded="false">
        <span class="docs-icon-plus"></span>
        <span class="docs-icon-minus"></span>
      </button>
    </div>
  </div>
</script>

<script id="forum-italia__comment" type="text/template">
  <li id="comment-{{ post.id }}" class="row mb-4 block-comments__item {{ hidden }} {{ isNew }}"
      data-topic="{{ post.topic_id }}" data-comment="{{ post.id }}">
    <div id="reply-to-{{ post.id }}" class="block-comments__reply-anchor"></div>
    <figure class="col-auto mb-0">
      <img class="block-comments__img rounded-circle" src="{{ avatarUrl }}">
    </figure>
    <div class="col block-comments__content">
      <div class="row align-items-center justify-content-between" id="comment-heading-1">
        <div class="col-auto">
          <span class="block-comments__name text-capitalize mb-0">{{ displayName }}</span>
        </div>
        <div class="col-auto">
          <p class="d-inline-block mr-2 block-comments__date mb-0">{{ date }}</p>
          <button class="block-comments__item-btn" data-toggle="collapse"
                  data-target="#collapse-{{ post.id }}">
            <i class="it-collapse"></i>
            <i class="it-expand"></i>
          </button>
        </div>
      </div>
      <p class="text-uppercase block-comments__role">{{ publicUserField }}</p>
      <div class="my-3">{{ replyLink }}</div>
      <div id="collapse-{{ post.id }}" class="block-comments__paragraph pl-3 border-left collapse show"
           aria-labelledby="comment-heading-1">
        {{ post.cooked }}
      </div>
      <div class="block-comments__actions mb-2 mt-3">
        {{ postActions }}
      </div>
    </div>
  </li>
</script>

<script id="forum-italia__like-button" type="text/template">
  <small>
      <button id="{{ buttonAction }}-like-{{ post.id }}" type="button" class="btn btn-primary btn-sm mr-2 px-2 py-1">
        {{ likeCount }}
        <i class="it-favorite ml-1 mr-0"></i>
      </button>
      {{ likeDone }}
    </small>
</script>

<script id="forum-italia__like-info" type="text/template">
  <small>
      <span id="like-{{ post.id }}" class="border rounded btn-sm mr-2 px-2 py-1">
        {{ likeCount }}
        <i class="it-favorite ml-1 mr-0"></i>
      </span>
      {{ likeDone }}
    </small>
</script>

<script id="forum-italia__reply-link" type="text/template">
  <div>
    <small>In risposta al 
      <a class="reply-to-post" href="#reply-to-{{ replyDest.id }}">
        commento di {{ replyDest.name }}
      </a>
    </small>
  </div>
</script>

<script id="forum__login" type="text/template">
  <div class="box-comment__user-image box-comment__user-image--anon">
    <i class="docs-icon-user"></i>
  </div>
  <div class="box-comment__login">
    <div><button class="login-button btn-link p-0 border-0 align-baseline">Accedi al Forum</button> per commentare</div>
  </div>
</script>

<script id="forum__comment" type="text/template">
  <div class="form group">
    <div class="box-comment__errors-box"></div>
    <!-- Write -->
    <div class="d-flex align-items-center mt-4 mb-4 block-comments__input box-comment__write">
      <figure class="col-auto mb-0">
        <img class="block-comments__img box-comment__figure rounded-circle" src="">
          <figcaption>
            <a href="#logout" class="block-comments__logout-link block-comments__logout-link--visible" data-toggle="modal" data-target="#logout-modal" title="Logout" alt="Logout">Logout</a>
          </figcaption>
      </figure>
      <textarea class="form-control box-comment__body col ml-2 p-2" id="comments-input" placeholder="Scrivi qui un commento. Per formattare il testo puoi usare Markdown. Clicca sul bottone 'suggerimenti' per vedere alcuni esempi." rows="4"></textarea>
    </div>
    <!-- Buttons -->
    <div class="box-comment__buttons">
      <button type="button" class="btn btn-primary btn-sm box-comment__submit mr-2" disabled="true"><div>invia</div></button>
      <button type="button" class="btn btn-sm btn-secondary new-comment__suggestions" data-container="body" data-toggle="popover" data-content="html">suggerimenti</button><span class="loading no-bg">&nbsp;</span>
    </div>
    <div class="box-comment__required">
      <span>Scrivi almeno altri <span class="required-chars">20</span> caratteri</span>
    </div>
  </div>
</script>

<script id="forum-italia__missing_permission" type="text/template">
	<div class="pl-2 block-comments__input missing_permission error error--{{ errorCode }} row">
		<figure class="col-auto mb-0 mr-2">
			<img class="block-comments__img new-comment__figure rounded-circle" src="">
			<figcaption>
				<a href="#logout" class="block-comments__logout-link block-comments__logout-link--visible" data-toggle="modal" data-target="#logout-modal" title="Logout" alt="Logout">Logout</a>
			</figcaption>
		</figure>

		<div class="missing_permission__text col pt-2">{{ errorText }}</div>
	</div>
</script>

<script id="forum__logout--modal" type="text/template">
  <div class="modal logout-modal" id="logout-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Logout</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Dopo il logout non sarà possibile scrivere nuovi commenti. Sicuro di voler procedere?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="logout-modal__submit">Conferma</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="logout-modal__cancel">Annulla</button>
        </div>
      </div>
    </div>
  </div>
</script>

<script id="forum-italia__markup__tooltip" type="text/template">
  <div class="tooltip tooltip--active doc-tooltip box-comment__suggestions__tooltip" role="tooltip">
    <div class="tooltip__wrap">
      Markdown per la formattazione del testo:
      <ul class="tooltip__content">
        <li><b>Grassetto:</b> __testo__ (o **testo**)</li>
        <li><i>Corsivo</i>: _testo_</li>
        <li>Link: [Testo](http://example.com)</li>
        <li>Citazione: &gt; Testo citazione</li>
      </ul>
    </div>
  </div>
</script>

<script id="forum-italia__silenced" type="text/template">
  <div class="error error__silenced">
    Il tuo account è stato temporaneamente sospeso, scopri di più leggendo
    <a href="{{ notificationsUrl }}" target="_blank">le tue notifiche</a> su Forum Italia.
    <br>
  </div>
</script>

<script id="forum-italia__closedTopic" type="text/template">
  <div class="error error__closed">
    Questa discussione è in sola lettura.
    <br>
  </div>
</script>

<script id="section_navigation__comments" type="text/template">
  <li class="chapter-nav__item">
      <span class="it-comment mr-2 align-middle"></span>
      <a href="#forum-italia-comments-{{ topicId }}" class="chapter-link chapter-link--expand">
          {{ postsCount }} commenti
      </a>
  </li>
</script>


<!--
  markup_modifier templates
-->

<script id="markup_modifier__chapter-header" type="text/template"> <div class="chapter-header clearfix"><div class="title-wrap"> </script>

<script id="markup_modifier__icon" type="text/template">
	<span class="docs-icon-{{ i }}"></span>
</script>

<script id="markup_modifier__note-action" type="text/template">
	<div class='note-action'>
		<button type='button' class='note-close-btn'>×</button>
		<button type='button' class='note-back-btn'><i class='it-arrow-up'></i> {{ text }} </button>
	</div>
</script>

<script id="markup_modifier__admonition" type="text/template">
	<div class='admonition__toggle-wrap'>
		<button type='button' class='admonition__toggle-btn'>
			<span class='admonition__toggle-show-more'>
				{{ more }} <span class='docs-icon-plus'></span>
			</span>
			<span class='admonition__toggle-show-less'>
				{{ less }} <span class='docs-icon-minus'></span>
			</span>
		</button>
	</div>
</script>


<!--
  glossary_page templates
-->

<script id="glossary__btn" type="text/template">
	<button class='glossary-page__btn collapsed border-top border-grey-light border-width-2 pt-3 pb-3' data-toggle='collapse' data-target='#glossary-{{ id }}' aria-expanded='true' aria-controls='glossary-{{ id }}'>
		<span class='docs-icon-plus mr-3'> </span>
		<span class='docs-icon-minus mr-3'> </span>
		{{ text }}
	</button>
</script>

<script id="glossary__copy-link" type="text/template">
	<div class='glossary-page__copy-link-wrap mt-3'>
		<i class='it-link mr-2 align-middle'></i>
		<button type='button' class='glossary-page__copy-link'> {{ copyLink }} </button>
	</div>
</script>


<!--
  searchbox_collapse templates
-->

<script id="searchbox-collapse" type="text/template">
	<div class="row p-2"><div class="col"></div></div>
</script>


<!--
  section_navigation templates
-->

<script id="section_navigation__nav" type="text/template">
    <div class="chapter-nav">
        <div class="chapter-nav__wrap">
            <ul class="chapter-nav__list chapter-nav__list--visible">
                <li class="chapter-nav__item">
                    <span class="it-more-items mr-2 align-middle"></span>
                    <button type="button" data-toggle="modal"
                        class="chapter-link chapter-link--expand">{{ seeActions }}</button>
                </li>
            </ul>
            <div class="{{ modalClass }} chapter-nav__list--hidden" tabindex="-1" role="dialog"
                     aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="{{ modalContainerClass }}">
                    <div class="{{ modalContentClass }} chapter-nav__list-wrap">
                        <div class="chapter-nav__title"> {{ title }} </div>
                        <ul class="chapter-nav__list">
                            <li class="chapter-nav__item">
                                <i class="it-link mr-2 align-middle"></i>
                                <button type="button" class="chapter-link">{{ copyLink }}</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>


<!--
  tooltip templates
-->

<script id="tooltip__main" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'>{{ item.body }}</p>
		</div>
	</div>
</script>

<script id="tooltip__glossary" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'>{{ trimmedSummary }}</p> {{ btnToGlossary }}
		</div>
	</div>
</script>

<script id="tooltip__note" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip doc-tooltip--note' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'> {{ item.body }}</p>
		</div>
	</div>
</script>


  <div id="main" role="document">
    <div class="container-fluid container-fluid--desktop main-container">
      <div class="row">
        <nav class="col--nav">
          <section class="docs-menu">
  <div id="desktop-menu" class="sidebar-nav">
    <a class=""
      aria-controls="desktop-menu" aria-label="exit navigation" title="exit navigation" href="#">
      <span class="" aria-hidden="true"></span>
    </a>

    <button data-toggle="collapse" data-target="#content-index" aria-expanded="true" class="sidebar-btn p-3 sidebar-btn--desktop" type="button" aria-controls="content-index">
      content index
      <span class="it-collapse float-right"></span>
      <span class="it-expand float-right"></span>
    </button>
    <div id="content-index" class="content-index--menu sidebar-list--wrapper sidebar-accordion-content collapse show">
      <ul class="">
        <li class="toctree-l1 ">
          <a href='index.html'>Summary</a>
        </li>
      </ul>
      
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="standards.html">References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="standards.html#technical-references">Technical references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="standards.html#national-and-european-legislation">National and European legislation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="standards.html#spid-regulatory-references">SPID regulatory references</a></li>
<li class="toctree-l2"><a class="reference internal" href="standards.html#cie-id-references">CIE id References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="termini_acronimi.html">Terms and Acronyms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="termini_acronimi.html#terms">Terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="termini_acronimi.html#acronyms">Acronyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="termini_acronimi.html#conventions-and-normative-terms">Conventions and Normative Terms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_federazione_delle_identita.html">The Italian eID Federations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_federazione_delle_identita.html#openid-connect-federation">OpenID Connect Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_federazione_delle_identita.html#configuration-of-the-federation">Configuration of the Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_federazione_delle_identita.html#how-to-participate">How to participate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entity_configuration.html">Entity Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-signature">Entity Configuration Signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-common-claims">Entity Configuration - common claims</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-leaves-and-intermediates">Entity Configuration Leaves and Intermediates</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-trust-anchor">Entity Configuration Trust Anchor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entity_statement.html">Entity Statements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entity_statement.html#entity-statement-signature">Entity Statement Signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_statement.html#id1">Entity Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_statement.html#metadata-policy">Metadata Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trust_marks.html">Trust Marks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#federation-entity-trust-mark"><strong>federation_entity</strong> Trust Mark</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#oauth-resource-trust-mark"><strong>oauth_resource</strong>  Trust Mark</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#trust-mark-validation">Trust Mark Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#trust-mark-revocation">Trust Mark Revocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#trust-mark-composition">Trust Mark Composition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="soggetti_aggregatori.html">Intermediate Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="trust_negotiation.html">Metadata retrieval</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trust_negotiation.html#relying-party">Relying Party</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_negotiation.html#openid-provider">OpenID Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_negotiation.html#access-to-the-entity-configuration">Access to the Entity Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="federation_endpoint.html">Federation Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors_federation.html">Federation error management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="errors_federation.html#federation-error-codes">Federation error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metadata_oidc.html">Metadata</a><ul>
<li class="toctree-l2"><a class="reference internal" href="metadata_oidc_op.html">OpenID Connect Provider Metadata (OP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_oidc_rp.html">OpenID Connect Relying Party Metadata (RP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_oidc_ta_sa.html">Trust Anchor (TA) and Intermediate (SA) Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_aa.html">Attribute Authority Metadata</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flusso_autenticazione.html">Authentication Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="authorization_endpoint.html">Authorization endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authorization_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization_endpoint.html#error-management">Error Management</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Token Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-token">Access Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id-token">ID Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#refresh-token">Refresh Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#error-codes">Error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="userinfo_endpoint.html">UserInfo Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="userinfo_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="userinfo_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="userinfo_endpoint.html#error-codes">Error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributi_utente.html">User attributes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="attributi_utente.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introspection_endpoint.html">Introspection Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introspection_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="introspection_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="introspection_endpoint.html#error-codes">Error Codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="revocation_endpoint.html">Revocation Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="revocation_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation_endpoint.html#error-codes">Error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logout.html">Logout</a></li>
<li class="toctree-l1"><a class="reference internal" href="cryptographic_algos.html">Cryptographic algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="log_management.html">Retention Policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="log_management.html#log-management-of-a-op-and-an-rp">Log management of a OP and an RP</a></li>
<li class="toctree-l2"><a class="reference internal" href="log_management.html#federation-historical-key-registry">Federation Historical Key registry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="differenze_spid_cie.html">Differences between SPID e CIE id</a><ul>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#authorization-endpoint">Authorization Endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#parameters-scope-and-claims">Parameters Scope and Claims</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#id-token">ID Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#refresh-token">Refresh Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#userinfo-endpoint">UserInfo Endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#introspection-endpoint">Introspection Endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#revocation-endpoint-and-logout">Revocation Endpoint and Logout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="confronto_oidc_cie_e_oidc_igov.html">Differences with OIDC iGov</a></li>
<li class="toctree-l1"><a class="reference internal" href="differenze_oidc_fed.html">Differences with OIDC Federation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="differenze_oidc_fed.html#client-registration">Client Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_oidc_fed.html#trust-mark">Trust Mark</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_oidc_fed.html#unsupported-claims-in-the-entity-statements">Unsupported Claims in the Entity Statements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="seccons_bcps.html">Security Considerations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#trust-marks-as-deterrent-against-abuses">Trust Marks as deterrent against abuses</a></li>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#maximum-number-of-authority-hints">Maximum Number of authority_hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#resolve-endpoint">Resolve endpoint</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="seccons_bcps.html#best-practices">Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#specializing-the-openid-core-and-federation-public-keys">Specializing the OpenID Core and Federation public keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#upgrading-strategy-of-the-openid-metadata">Upgrading strategy of the OpenID Metadata</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="esempi.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-entity-configuration-request">EN 1. Entity Configuration Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-1-entity-configuration-response-relying-party">EN 1.1. Entity Configuration Response Relying Party</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-2-entity-configuration-response-openid-provider">EN 1.2. Entity Configuration Response Openid Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-3-entity-configuration-response-intermediary">EN 1.3. Entity Configuration Response Intermediary</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-4-entity-configuration-response-trust-anchor">EN 1.4. Entity Configuration Response Trust Anchor</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-5-trust-mark-issued-by-ta-to-a-rp">EN 1.5. Trust Mark issued by TA to a RP</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-6-trust-mark-issued-by-ta-to-a-sa">EN 1.6. Trust Mark issued by TA to a SA</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-7-trust-mark-issued-by-sa-to-a-rp">EN 1.7. Trust Mark issued by SA to a RP</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-2-entity-statement-request">EN 2. Entity Statement Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-2-1-entity-statement-response">EN 2.1 Entity Statement Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-3-entity-list-request">EN 3. Entity List Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-3-1-entity-list-response">EN 3.1. Entity List Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-4-resolve-entity-statement-endpoint-request">EN 4. Resolve Entity Statement Endpoint Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-4-1-resolve-entity-statement-endpoint-response">EN 4.1. Resolve Entity Statement Endpoint Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-5-trust-mark-status-request">EN 5. Trust Mark Status Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-5-1-trust-mark-status-response">EN 5.1. Trust Mark Status Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-6-authorization-request">EN 6. Authorization Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-7-metadata-policy">EN 7. Metadata Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="diventa_fornitore.html">Become a service provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="come_contribuire.html">How to contribute</a></li>
</ul>

      
    </div>

    

    

    
  </div>
</section>
          <!-- Toggle -->
<div class="navbar-toggler--wrap navbar-toggler--wrap--bottom p-3">
  <div class="navbar-toggler navbar-toggler--open p-0 border-0 ml-auto">
    <div class="navbar-toggler-bottom__chapter align-middle text-truncate">
      <span class="it-list mr-2"></span>Token Endpoint
    </div>
  </div>
</div>

<div class="sidebar-tabs">

  <!-- Back button. -->
  <div class="row">
    <div class="col">
      <button class="navbar-toggler navbar-toggler--back border-0 ml-auto" type="button" data-toggle="offcanvas">
        <span class="it-arrow-left align-middle"></span>
        <span class="navbar-toggler__chapter align-middle ml-2">
          indices and glossary
        </span>
      </button>
    </div>
  </div>

  <!-- Tab -->
  <ul class="row ml-3 mr-3 nav nav-tabs" role="tablist">
    <li class="col text-center active">
      <a id="content-index-mobile-tab" data-toggle="tab" href="#content-index-mobile" aria-controls="content-index-mobile" role="tab" aria-selected="true" class="sidebar-btn p-2 sidebar-btn--mobile active show">
        contents
      </a>
    </li>
    <li class="col text-center">
      <a id="figures-index-mobile-tab" data-toggle="tab" href="#figures-index-mobile" aria-controls="figures-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        figures
      </a>
    </li>
    <li class="col text-center">
      <a id="table-index-mobile-tab" data-toggle="tab" href="#table-index-mobile" aria-controls="table-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        tables
      </a>
    </li>
    <li class="col text-center">
      <a id="glossary-index-mobile-tab" data-toggle="tab" href="#glossary-index-mobile" aria-controls="glossary-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        glossary
      </a>
    </li>
  </ul>
</div>


<!-- Off canvas -->
<section class="docs-offcanvas-menu" id="sidebar-nav">
  <div class="tab-content sidebar-nav">

      <div id="content-index-mobile" class="content-index--menu tab-pane sidebar-list--wrapper fade show active" role="tabpanel" aria-labelledby="content-index-mobile-tab">
        <ul class="">
          <li class="toctree-l1 ">
            <a href='index.html'>Summary</a>
          </li>
        </ul>
        
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="standards.html">References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="standards.html#technical-references">Technical references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="standards.html#national-and-european-legislation">National and European legislation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="standards.html#spid-regulatory-references">SPID regulatory references</a></li>
<li class="toctree-l2"><a class="reference internal" href="standards.html#cie-id-references">CIE id References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="termini_acronimi.html">Terms and Acronyms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="termini_acronimi.html#terms">Terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="termini_acronimi.html#acronyms">Acronyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="termini_acronimi.html#conventions-and-normative-terms">Conventions and Normative Terms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_federazione_delle_identita.html">The Italian eID Federations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_federazione_delle_identita.html#openid-connect-federation">OpenID Connect Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_federazione_delle_identita.html#configuration-of-the-federation">Configuration of the Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_federazione_delle_identita.html#how-to-participate">How to participate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entity_configuration.html">Entity Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-signature">Entity Configuration Signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-common-claims">Entity Configuration - common claims</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-leaves-and-intermediates">Entity Configuration Leaves and Intermediates</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_configuration.html#entity-configuration-trust-anchor">Entity Configuration Trust Anchor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entity_statement.html">Entity Statements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entity_statement.html#entity-statement-signature">Entity Statement Signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_statement.html#id1">Entity Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity_statement.html#metadata-policy">Metadata Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trust_marks.html">Trust Marks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#federation-entity-trust-mark"><strong>federation_entity</strong> Trust Mark</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#oauth-resource-trust-mark"><strong>oauth_resource</strong>  Trust Mark</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#trust-mark-validation">Trust Mark Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#trust-mark-revocation">Trust Mark Revocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_marks.html#trust-mark-composition">Trust Mark Composition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="soggetti_aggregatori.html">Intermediate Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="trust_negotiation.html">Metadata retrieval</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trust_negotiation.html#relying-party">Relying Party</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_negotiation.html#openid-provider">OpenID Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="trust_negotiation.html#access-to-the-entity-configuration">Access to the Entity Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="federation_endpoint.html">Federation Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors_federation.html">Federation error management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="errors_federation.html#federation-error-codes">Federation error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metadata_oidc.html">Metadata</a><ul>
<li class="toctree-l2"><a class="reference internal" href="metadata_oidc_op.html">OpenID Connect Provider Metadata (OP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_oidc_rp.html">OpenID Connect Relying Party Metadata (RP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_oidc_ta_sa.html">Trust Anchor (TA) and Intermediate (SA) Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_aa.html">Attribute Authority Metadata</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flusso_autenticazione.html">Authentication Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="authorization_endpoint.html">Authorization endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authorization_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization_endpoint.html#error-management">Error Management</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Token Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-token">Access Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id-token">ID Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#refresh-token">Refresh Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#error-codes">Error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="userinfo_endpoint.html">UserInfo Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="userinfo_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="userinfo_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="userinfo_endpoint.html#error-codes">Error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributi_utente.html">User attributes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="attributi_utente.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introspection_endpoint.html">Introspection Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introspection_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="introspection_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="introspection_endpoint.html#error-codes">Error Codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="revocation_endpoint.html">Revocation Endpoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="revocation_endpoint.html#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation_endpoint.html#response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="revocation_endpoint.html#error-codes">Error codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logout.html">Logout</a></li>
<li class="toctree-l1"><a class="reference internal" href="cryptographic_algos.html">Cryptographic algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="log_management.html">Retention Policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="log_management.html#log-management-of-a-op-and-an-rp">Log management of a OP and an RP</a></li>
<li class="toctree-l2"><a class="reference internal" href="log_management.html#federation-historical-key-registry">Federation Historical Key registry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="differenze_spid_cie.html">Differences between SPID e CIE id</a><ul>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#authorization-endpoint">Authorization Endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#parameters-scope-and-claims">Parameters Scope and Claims</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#id-token">ID Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#refresh-token">Refresh Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#userinfo-endpoint">UserInfo Endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#introspection-endpoint">Introspection Endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_spid_cie.html#revocation-endpoint-and-logout">Revocation Endpoint and Logout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="confronto_oidc_cie_e_oidc_igov.html">Differences with OIDC iGov</a></li>
<li class="toctree-l1"><a class="reference internal" href="differenze_oidc_fed.html">Differences with OIDC Federation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="differenze_oidc_fed.html#client-registration">Client Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_oidc_fed.html#trust-mark">Trust Mark</a></li>
<li class="toctree-l2"><a class="reference internal" href="differenze_oidc_fed.html#unsupported-claims-in-the-entity-statements">Unsupported Claims in the Entity Statements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="seccons_bcps.html">Security Considerations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#trust-marks-as-deterrent-against-abuses">Trust Marks as deterrent against abuses</a></li>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#maximum-number-of-authority-hints">Maximum Number of authority_hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#resolve-endpoint">Resolve endpoint</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="seccons_bcps.html#best-practices">Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#specializing-the-openid-core-and-federation-public-keys">Specializing the OpenID Core and Federation public keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="seccons_bcps.html#upgrading-strategy-of-the-openid-metadata">Upgrading strategy of the OpenID Metadata</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="esempi.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-entity-configuration-request">EN 1. Entity Configuration Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-1-entity-configuration-response-relying-party">EN 1.1. Entity Configuration Response Relying Party</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-2-entity-configuration-response-openid-provider">EN 1.2. Entity Configuration Response Openid Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-3-entity-configuration-response-intermediary">EN 1.3. Entity Configuration Response Intermediary</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-4-entity-configuration-response-trust-anchor">EN 1.4. Entity Configuration Response Trust Anchor</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-5-trust-mark-issued-by-ta-to-a-rp">EN 1.5. Trust Mark issued by TA to a RP</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-6-trust-mark-issued-by-ta-to-a-sa">EN 1.6. Trust Mark issued by TA to a SA</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-1-7-trust-mark-issued-by-sa-to-a-rp">EN 1.7. Trust Mark issued by SA to a RP</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-2-entity-statement-request">EN 2. Entity Statement Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-2-1-entity-statement-response">EN 2.1 Entity Statement Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-3-entity-list-request">EN 3. Entity List Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-3-1-entity-list-response">EN 3.1. Entity List Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-4-resolve-entity-statement-endpoint-request">EN 4. Resolve Entity Statement Endpoint Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-4-1-resolve-entity-statement-endpoint-response">EN 4.1. Resolve Entity Statement Endpoint Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-5-trust-mark-status-request">EN 5. Trust Mark Status Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-5-1-trust-mark-status-response">EN 5.1. Trust Mark Status Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-6-authorization-request">EN 6. Authorization Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="esempi.html#en-7-metadata-policy">EN 7. Metadata Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="diventa_fornitore.html">Become a service provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="come_contribuire.html">How to contribute</a></li>
</ul>

        
      </div>

      <div id="figures-index-mobile" class="figures-index--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="figures-index-mobile-tab">
        None
      </div>

      <div id="table-index-mobile" class="table-index--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="table-index-mobile-tab">
        None
      </div>

      <div id="glossary-index-mobile" class="glossary-mobile--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="glossary-index-mobile-tab">
        None
      </div>

  </div>
</section>
        </nav>
        <div id="doc-content" class="col-content">
          <!--<div class="doc-content__consultation">
            <span class="it-icon-edit"></span>
            in consultation
          </div>-->
          
            <div class="footer-buttons footer-buttons--prev" role="navigation" aria-label="footer navigation">
                <a href="authorization_endpoint.html" class="" title="Authorization endpoint" accesskey="p" rel="prev"> Torna a Authorization endpoint</a>
            </div>
          
          
  <section id="token-endpoint">
<h1>Token Endpoint<a class="headerlink" href="#token-endpoint" title="Permalink to this heading">¶</a></h1>
<p>At the end of the authentication flow described at the previous section, the RP sends a request to the Token Endpoint with the authorization code received by the OP. These tokens MUST be signed JWT.</p>
<p>The Token response, if succesfull, returns an <em>ID Token</em>, an <em>Access Token</em> and possibly a <em>Refresh Token</em> (if the authentication request has <em>scope=offline_access</em> and <em>prompt=consent</em>. See Section <a class="reference internal" href="#refresh-token"><span class="std std-ref">Refresh Token</span></a>.).</p>
<div class="admonition-spid-icon admonition">
<p class="admonition-title"><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a></p>
<p>In a <a class="reference external" href="https://www.agid.gov.it/sites/default/files/repository_files/linee_guida_openid_connect_in_spid.pdf#page=47">long revocable session</a>, the RP MAY request a Token to the <em>Token Endpoint</em> sending a <em>Refresh Token</em> in its possession, for obtaining a new <em>Access Token</em> and a new <em>ID Token</em>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The authentication method of the RP by the Token Endpoint is the <strong>private_key_jwt</strong> (<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication">OpenID.Core#ClientAuthentication</a>)</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://tools.ietf.org/html/rfc6749#section-3.2">https://tools.ietf.org/html/rfc6749#section-3.2</a></p></li>
<li><p><a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#TokenEndpoint">https://openid.net/specs/openid-connect-core-1_0.html#TokenEndpoint</a></p></li>
<li><p><a class="reference external" href="https://openid.net/specs/openid-igov-oauth2-1_0-03.html#Section-2.1.2">https://openid.net/specs/openid-igov-oauth2-1_0-03.html#Section-2.1.2</a></p></li>
<li><p><a class="reference external" href="https://openid.net/specs/openid-igov-openid-connect-1_0-03.html#Section-2.2">https://openid.net/specs/openid-igov-openid-connect-1_0-03.html#Section-2.2</a></p></li>
</ul>
</div>
<section id="request">
<h2>Request<a class="headerlink" href="#request" title="Permalink to this heading">¶</a></h2>
<p>The claims that MUST be included in the <em>Token Request</em> are given below.</p>
<p><strong>Request example with authorization code (case 1)</strong></p>
<blockquote>
<div><div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/token</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">https://op.spid.agid.gov.it</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>

client_id=https://rp.spid.agid.gov.it&amp;
client_assertion=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiw
ibmFtZSI6IlNQSUQiLCJhZG1pbiI6dHJ1ZX0.LVyRDPVJm0S9q7oiXcYVIIqGWY0wWQlqxvFGYswL…&amp;
client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwtbearer&amp;
code=usDwMnEzJPpG5oaV8x3j&amp;
code_verifier=9g8S40MozM3NSqjHnhi7OnsE38jklFv2&amp;
grant_type=authorization_code
</pre></div>
</div>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#RPAuthentication">https://openid.net/specs/openid-connect-core-1_0.html#RPAuthentication</a></p></li>
</ul>
</div>
<p><strong>Request example with Refresh Token (case 2):</strong></p>
<blockquote>
<div><div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/token</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">https://op.spid.agid.gov.it</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>

client_id=https://rp.spid.agid.gov.it&amp;
client_assertion=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiw
ibmFtZSI6IlNQSUQiLCJhZG1pbiI6dHJ1ZX0.LVyRDPVJm0S9q7oiXcYVIIqGWY0wWQlqxvFGYswL…&amp;
client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwtbearer&amp;
grant_type=refresh_token&amp;
refresh_token=8xLOxBtZp8
</pre></div>
</div>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 60%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Supported by</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>See <a class="reference external" href="https://openid.net/specs/openid-connect-registration-1_0.html">OpenID.Registration</a>. It MUST contain an HTTPS URL that uniquely identifies the RP.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>client_assertion</strong></p></td>
<td><p>JWT signed with the Relying Party's private key containing the following parameters:</p>
<blockquote>
<div><p><strong>iss</strong>: This MUST contain the <em>client_id</em>.</p>
<p><strong>sub</strong>: This MUST contain the <em>iss</em>.</p>
<p><strong>aud</strong>: URL of the OP Token Endpoint.</p>
<p><strong>iat</strong>: UNIX Timestamp with the time of the JWT issuance, coded as NumericDate as indicated in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p>
<p><strong>exp</strong>: UNIX Timestamp with the expiry time of the JWT, coded as NumericDate as indicated in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p>
<p><strong>jti</strong>: Unique Identifier uuid4 for this authentication request, generated by the client. Eg: it can be in <em>uuid4</em> format.</p>
</div></blockquote>
</td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>client_assertion_type</strong></p></td>
<td><p>It must get the following value: <br/>
<strong>urn:ietf:params:oauth:client-assertion-type:jwtbearer</strong>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>code</strong></p></td>
<td><p>Authorization code returned in the Authentication Response. Required only if <strong>grant_type</strong> is <strong>authorization_code</strong>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>code_verifier</strong></p></td>
<td><p>Verification code of the code_challenge. Required only if <strong>grant_type</strong> is <strong>authorization_code</strong>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>grant_type</strong></p></td>
<td><p>Type of credentials, presented by the RP, for the current request.
It MAY get one of the following values:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>authorization_code</strong></p></li>
<li><p><strong>refresh_token</strong></p></li>
</ul>
</div></blockquote>
</td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>refresh_token</strong></p></td>
<td><p>Required only if <strong>grant_type</strong> is <strong>refresh_token</strong>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="response">
<h2>Response<a class="headerlink" href="#response" title="Permalink to this heading">¶</a></h2>
<p>The OpenID Provider (OP) returns an ID Token, an Access Token and possibly a Refresh Token.</p>
<p>The Access Token must be formed according to the standard indications of the <a class="reference external" href="https://openid.net/specs/openid-igov-oauth2-1_0-03.html#Section-3.2.1">&quot;International Government Assurance Profile (iGov) for OAuth 2.0 - Draft 03&quot;, section 3.2.1, &quot;JWT Bearer Tokens&quot;</a>.</p>
<p>The ID Token must be formed according to the indications contained in the next section.</p>
<p>The response MUST contain the following claims.</p>
<p><strong>Response example:</strong></p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Wed, 22 Jul 2018 19:15:56 GMT</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="s2">&quot;dC34Pf6kdG...&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="s2">&quot;Bearer&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="s2">&quot;wJ848BcyLP...&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;expires_in&quot;</span><span class="p">:</span><span class="mi">1800</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;id_token&quot;</span><span class="p">:</span><span class="s2">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY...&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 60%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Supported by</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>access_token</strong></p></td>
<td><p>The Access Token, in signed JWT format, allows accessing the UserInfo Endpoint for obtaining the attributes.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>token_type</strong></p></td>
<td><p>Type of <em>Access Token</em> returned. It MUST always be equal to <strong>Bearer</strong>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>refresh_token</strong></p></td>
<td><p>Available only in case of <a class="reference external" href="https://www.agid.gov.it/sites/default/files/repository_files/linee_guida_openid_connect_in_spid.pdf#page=47">long revocable session</a>. The <em>Refresh Token</em> MUST be a signed JWT format. It allows calling again the <em>Token Endpoint</em> for obtaining a new <em>Access Token</em> and a new <em>ID Token</em>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>expires_in</strong></p></td>
<td><p>Expity time of the <em>Access Token</em> in seconds.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>id_token</strong></p></td>
<td><p>ID Token in JWT format (see next section).</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="access-token">
<h2>Access Token<a class="headerlink" href="#access-token" title="Permalink to this heading">¶</a></h2>
<p>The Access Token is a signed JSON Web Token (JWT) that allows access to the
UserInfo endpoint to get user attributes.</p>
<p><strong>Access Token header and payload example:</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;alg&quot;: &quot;RS256&quot;,
  &quot;kid&quot;: &quot;dB67gL7ck3TFiIAf7N6_7SHvqk0MDYMEQcoGGlkUAAw&quot;,
  &quot;typ&quot;: &quot;at+jwt&quot;
}
.
{
  &quot;iss&quot;:&quot;https://op.spid.agid.gov.it/&quot;,
  &quot;sub&quot;: &quot;9sd798asd98asui23hiuds89y798sfyg&quot;,
  &quot;aud&quot;: [
  &quot;https://rp.spid.example.it&quot;
  ],
  &quot;client_id&quot;: &quot;https://rp.spid.example.it&quot;,
  &quot;scope&quot;: &quot;openid&quot;,
  &quot;jti&quot;: &quot;9ea42af0-594c-4486-9602-8a1f8dde42d3&quot;,
  &quot;exp&quot;: 1656859559,
  &quot;iat&quot;: 1656857579
}
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 60%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Supported by</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>It MUST be an HTTPS URL that uniquely identifies the OP. The client MUST verify that this value matches the called OP.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>sub</strong></p></td>
<td><p>See <a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#SubjectIDTypes">OpenID.Core#SubjectIDTypes</a>. It MUST be of type <em>pairwise</em>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>It MUST contain a HTTPS URL that uniquely identifies the RP.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>It MUST match the value <em>client_id</em>. The RP MUST verify that this value matches its client ID.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>scope</strong></p></td>
<td><p>The OP SHOULD add the <em>scope</em> parameter as defined in <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a> Section 2.2.3. It MUST match the value in the authentication request.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>UNIX Timestamp with the time of JWT issuance, coded as NumericDate as indicated in <span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>exp</strong></p></td>
<td><p>UNIX Timestamp with the expiry time of the JWT, coded as NumericDate as indicated in <span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>jti</strong></p></td>
<td><p>It MUST be a String in <em>uuid4</em> format. Unique Token ID identifier that the RP MAY use to prevent reuse by rejecting the Token ID if already processed.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>nonce</strong></p></td>
<td><p>See <a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest">OpenID.Core#AuthRequest</a>. It MUST be a random string of at least 32 alphanumeric characters. This value MUST match the value sent by the RP in the authentication request.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id-token">
<h2>ID Token<a class="headerlink" href="#id-token" title="Permalink to this heading">¶</a></h2>
<p>The ID Token is a signed JSON Web Token (JWT) that contains information about the user that has executed the authentication. The RPs MUST validate the ID Token.</p>
<div class="admonition-cieid-icon admonition">
<p class="admonition-title"><a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p>
<p>If the RP exposes in its metadata the parameter <strong>id_token_encrypted_response_alg</strong> the OP MUST encrypt the ID Token.</p>
</div>
<p>In this case the ID Token MUST be a <strong>nested signed and encrypted JWT</strong> containing the <em>cty</em> (Content-Type) parameter in the JOSE header configured to <em>JWT</em> (see <span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html#section-5.2"><strong>RFC 7519#section-5.2</strong></a>).</p>
<p>The claims available in the <em>ID Token</em> are given below.</p>
<p><strong>Example of header and payload of an ID Token:</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;alg&quot;: &quot;RS256&quot;,
  &quot;kid&quot;: &quot;dB67gL7ck3TFiIAf7N6_7SHvqk0MDYMEQcoGGlkUAAw&quot;
}
.
{
    &quot;iss&quot;:&quot;https://op.spid.agid.gov.it/&quot;,
    &quot;sub&quot;:&quot;9sd798asd98asui23hiuds89y798sfyg&quot;,
    &quot;aud&quot;:&quot;https://rp.spid.agid.gov.it/auth&quot;,
    &quot;acr&quot;:&quot;https://www.spid.gov.it/SpidL2&quot;,
    &quot;at_hash&quot;:&quot;qiyh4XPJGsOZ2MEAyLkfWqeQ&quot;,
    &quot;iat&quot;:1519032969,
    &quot;nbf&quot;:1519032969,
    &quot;exp&quot;:1519033149,
    &quot;jti&quot;:&quot;nw4J0zMwRk4kRbQ53G7z&quot;,
    &quot;nonce&quot;:&quot;MBzGqyf9QytD28eupyWhSqMj78WNqpc2&quot;
}
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 60%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Supported by</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>It MUST be an HTTPS URL that uniquely identifies the OP. The client MUST verify that this value matches the called OP.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>sub</strong></p></td>
<td><p>See <a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#SubjectIDTypes">OpenID.Core#SubjectIDTypes</a>. It MUST be <em>pairwise</em> type.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>aud</strong></p></td>
<td><p>It MUST match the value <em>client_id</em>. The RP MUST verify that this value matches its client ID.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>acr</strong></p></td>
<td><p>Effective authentication level. It MUST be equal or greater than the one requested by the client in the Authentication Request.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>at_hash</strong></p></td>
<td><p>See <a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#CodeIDToken">OpenID.Core#CodeIDToken</a>. Its value is the base64url encoding of the left-most half of the hash of the octets of the ASCII representation of the <em>Access Token</em> value, where the hash algorithm used is the hash algorithm used in the alg Header Parameter of the ID Token's JOSE Header. The client MUST verify this value by applying the same function to the <em>Access Token</em> returned with the Token ID.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>UNIX Timestamp with the time of JWT issuance, coded as NumericDate as indicated in <span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>nbf</strong></p></td>
<td><p>UNIX Timestamp. Time of the validity beginning of the JWT in NumericDate format, as indicated in <span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. MUST match with the value of <strong>iat</strong>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>exp</strong></p></td>
<td><p>UNIX Timestamp with the expiry time of the JWT, coded as NumericDate as indicated in <span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>jti</strong></p></td>
<td><p>It MUST be a String in <em>uuid4</em> format. Unique Token ID identifier that the RP MAY use to prevent reuse by rejecting the Token ID if already processed.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>nonce</strong></p></td>
<td><p>See <a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest">OpenID.Core#AuthRequest</a>. It MUST be a random string of at least 32 alphanumeric characters. This value MUST match the value sent by the RP in the authentication request.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#IDToken">https://openid.net/specs/openid-connect-core-1_0.html#IDToken</a></p></li>
<li><p><a class="reference external" href="https://openid.net/specs/openid-igov-openid-connect-1_0-03.html#Section-3.1">https://openid.net/specs/openid-igov-openid-connect-1_0-03.html#Section-3.1</a></p></li>
</ul>
</div>
</section>
<section id="refresh-token">
<span id="id1"></span><h2>Refresh Token<a class="headerlink" href="#refresh-token" title="Permalink to this heading">¶</a></h2>
<p>The <em>Refresh Token</em> is a signed JWT that MAY be issued by the OP and MAY be used to obtain a new <em>Access Token</em> that enables the RP to access the UserInfo endpoint without requiring any direct user interaction.</p>
<p>The <em>Refresh Token</em> MUST be a signed JWT containing at least the following parameters.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 60%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Supported by</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>It MUST be an HTTPS URL that uniquely identifies the OP. The RP MUST verify that this value matches the called OP.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>It MUST match the value client_id. The RP MUST verify that this value matches its client ID.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>UNIX Timestamp with the time of JWT issuance, coded as NumericDate as indicated in <span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>exp</strong></p></td>
<td><p>UNIX Timestamp with the expiry time of the JWT, coded as NumericDate as indicated in <span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><strong>jti</strong></p></td>
<td><p>It MUST be a String in uuid4 format. Unique <em>Refresh Token</em> identifier that the RP MAY use to prevent reuse by rejecting the <em>Refresh Token</em>  if already processed.</p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
</tbody>
</table>
<div class="admonition-cieid-icon admonition">
<p class="admonition-title"><a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p>
<p>To obtain a <em>Refresh Token</em>, the RP MUST include in the <em>scope</em> parameter of the authentication request the value <em>offline_access</em> and in the <em>prompt</em> parameter, the value <em>consent</em>. The use of this scope can be useful in scenarios where an RP needs to verify that an end user's digital identity is still valid or wants to keep attributes it has previously collected during the authentication phase up-to-date, such as for sending notifications to the end user after the end user has been authenticated.
<strong>The Refresh Token MUST NOT allow the requesting RP to obtain an ID Token, neither the one previously issued during authentication nor a new ID Token. The use of the Refresh Token MUST NOT be used by RPs to obtain a new user authentication with the OP or to renew a pre-existing session, but MAY be used as a mechanism to obtain from the UserInfo endpoint only the same set of user attributes requested at the initial authentication phase and for which the user has given explicit consent.</strong> Such consent MUST be collected by the OP at the end-user authentication phase on the consent page (it requires the ability to enable or disable this option on the consent page) and MAY be conditional on a validity period if defined by the OP according to policies on the treatment of personal data. Disabling this option by the user MUST still allow user authentication but MUST NOT release a <em>Refresh Token</em>.</p>
<p>The OP who receives a request for a new <em>Access Token</em> via a <em>Refresh Token</em> MAY send a notification to the user via one of the available e-delivery services (email, sms, mobile app notification). The user who does not recognize this operation as legitimate or who wants to disable this option can request from the OP a revocation of the given consent (and therefore of the tokens issued as a result of the same) according to the procedures made known within the consent acquisition page. The notification MUST be informative only and not authorizing. Within the notification MUST be made known to the user how to revoke the consent given. The OP MUST allow the user to disable this option at any time through appropriate functionality made available by the OP itself.</p>
<p>For security reasons, an OP MUST return, along with a new <em>Access Token</em>, also a new <em>Refresh Token</em>, invalidating all previously issued tokens (<em>refresh token rotation</em>) to the RP and related to the end-user. The new <em>Refresh Token</em> MUST have the <em>exp</em> parameter according to the expected duration.</p>
</div>
<div class="admonition-spid-icon admonition">
<p class="admonition-title"><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a></p>
<p>In a mobile application scenario, to prevent the user from entering credentials every time, an RP MAY use the Refresh Token to enable revocable long sessions as defined in <a class="reference external" href="https://www.agid.gov.it/sites/default/files/repository_files/linee_guida_openid_connect_in_spid.pdf">LL.GG. OpenID Connect in SPID</a> and <a class="reference external" href="https://www.agid.gov.it/sites/default/files/repository_files/spid-avviso-n41-integrazione_ll.gg_._openid_connect_in_spid.pdf">Avviso n.41</a> .
The <em>Token endpoint</em> verifies the validity of the Refresh Token and, if the the original authentication request included <em>https://www.spid.gov.it/SpidL1</em> in the <em>acr_values</em>, a new <em>ID Token</em> valid only for the SPID level 1 is issued.
For more details on the Refresh Token in SPID, please refer to the following documentation:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://www.agid.gov.it/sites/default/files/repository_files/linee_guida_openid_connect_in_spid.pdf">LL.GG. OpenID Connect in SPID</a></p></li>
<li><p><a class="reference external" href="https://www.agid.gov.it/sites/default/files/repository_files/spid-avviso-n41-integrazione_ll.gg_._openid_connect_in_spid.pdf">Avviso n.41 - Integrazione LL.GG. OpenID Connect in SPID</a></p></li>
</ul>
</div></blockquote>
</div>
<section id="validity-period-of-a-refresh-token">
<h3>Validity Period of a Refresh Token<a class="headerlink" href="#validity-period-of-a-refresh-token" title="Permalink to this heading">¶</a></h3>
<p>The <em>Refresh Token</em> MUST NOT be valid (difference between <em>iat</em> and <em>exp</em>) more than 30 days.</p>
<p>If the Refresh Token is not valid (expired or revoked) and the RP sends a Token refresh request to the OP, the OP MUST return an error in the response (see <a class="reference internal" href="authorization_endpoint.html#codici-errore"><span class="std std-ref">Error codes</span></a>).</p>
<div class="admonition-cieid-icon admonition">
<p class="admonition-title"><a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p>
<p>Notwithstanding the validity of the token, the OP MAY set a validity period related to the consent the user has provided to use the <em>scope=offline_access</em> and the <em>Refresh Token</em>. Approaching the expiration of the validity period of the consensus, whenever such a period is provided for in the OP's policies, the value of <em>exp</em> MUST be calculated as the minimum value between the validity period of the token and that of the consensus.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to clarify the rotation mechanism, a non-normative example is given below where <em>Refresh Tokens</em> are assumed to be valid for 30 days.</p>
<ul class="simple">
<li><p>t1: an RP authenticates with scope=offline_access, then obtains a <em>Refresh Token</em> RT1 (validity 30gg)</p></li>
<li><p>t2 = t1 + 4gg: the RP makes a request to the Token endpoint by presenting RT1. The OP recognizes that the request is from the same RP and issues a new <em>Access Token</em> and new <em>Refresh Token</em>  RT2 with validity 30gg from t2</p></li>
<li><p>t3 = t1 + 32gg: after 28gg from t2 the RP makes a request to the Token endpoint by submitting RT2. The OP recognizes that the request is from the same RP and issues a new <em>Access Token</em>  and new <em>Refresh Token</em> RT3 with validity 30gg from t3</p></li>
<li><p>t4 = t1 + 64gg: after 32gg from t3 the RP makes a request to the Token endpoint by submitting RT3. This time the OP rejects the request with an error because RT3 is found to be no longer valid.</p></li>
</ul>
</div>
</section>
</section>
<section id="error-codes">
<span id="token-endpoint-errors"></span><h2>Error codes<a class="headerlink" href="#error-codes" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>HTTP Code</strong></p></th>
<th class="head"><p><strong>Supported by</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>invalid_client</em></p></td>
<td><p>Client authentication failed (e.g., unknown client_id, no client authentication included, or unsupported authentication method) <br/> (<span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
<td><p><em>401 Unauthorized</em></p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><em>unsupported_grant_type</em></p></td>
<td><p>The grant_type parameter contains an incorrect value.</p></td>
<td><p><em>400 Bad Request</em></p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><em>invalid_grant</em></p></td>
<td><p>The grant_type, code, code_verifier, access_token parameters are not valid.</p></td>
<td><p><em>400 Bad Request</em></p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><em>invalid_request</em></p></td>
<td><p>The request is not valid due to the lack or incorrectness of one or more parameters.</p></td>
<td><p><em>400 Bad Request</em></p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-even"><td><p><em>server_error</em></p></td>
<td><p>The OP encountered an internal problem.</p></td>
<td><p><em>500 internal server error</em></p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><em>temporarily_unavailable</em></p></td>
<td><p>The OP encountered a temporary internal problem.</p></td>
<td><p><em>503 Service Unavailable</em></p></td>
<td><p><a class="reference internal" href="_images/spid3.svg"><img alt="spid-icon" src="_images/spid3.svg" width="45" /></a> <a class="reference internal" href="_images/cieid3.svg"><img alt="cieid-icon" src="_images/cieid3.svg" width="45" /></a></p></td>
</tr>
</tbody>
</table>
</section>
</section>


          
            <div class="footer-buttons footer-buttons--next" role="navigation" aria-label="footer navigation">
                  <a href="userinfo_endpoint.html" class="" title="UserInfo Endpoint" accesskey="n" rel="next">UserInfo Endpoint</a>
              </div>
            
          </div>

        </div>
      </div>
  </div>
  <footer class="footer container-fluid container-fluid--desktop">
  <div class="px-3 pt-md-3 pb-md-2 mx-md-5 mb-4 mb-md-0">
    <div class="row align-items-center d-flex">
      <div class="col-xs-12 col-sm-6 col-lg-4 pt-4 pt-sm-5">
        <a href="http://teamdigitale.governo.it/" target="_blank" class="d-inline-block" rel="noopener">
          <div class="d-flex align-items-center">
            <div class="px-2">
              <img class="team-logo--icon" src="_static/images/team-digitale-logo.svg" alt="Team per la Trasformazione Digitale">
            </div>
            <div class="px-2 border-white border-left team-logo--text text-white">
              Team per la Trasformazione Digitale
            </div>
          </div>
        </a>
      </div>
      <div class="col-xs-12 col-sm-6 col-lg-4">
        <span class="d-block m-2 in-collaboration">in collaboration with</span>
        <a href="https://www.agid.gov.it/" target="_blank" class="d-inline-block" rel="noopener">
          <div class="d-flex align-items-center">
            <div class="px-2">
              <img class="agid-logo--icon" src="_static/images/agid-logo.svg" alt="Agenzia per l'Italia Digitale">
            </div>
            <span class="agid-logo--separator border-white border-left"></span>
            <div class="px-2 agid-logo--text text-white">
              Agenzia per l'Italia Digitale
            </div>
          </div>
        </a>
      </div>
      <div class="col-sm-12 col-lg-4 pt-4 pt-sm-5">
        <div class="text-center text-lg-right social d-flex align-items-center justify-content-center justify-content-lg-end flex-column flex-lg-row">
          <div class="mr-lg-1 mb-2 mb-lg-0">Follow us on</div>
          <div>
            <a href="https://github.com/italia/" class="d-inline-flex small-prints mx-1 social__link"><i class="d-inline-block it-github"></i></a>
            <a href="https://twitter.com/teamdigitaleIT" class="d-inline-flex small-prints mx-1 social__link"><i class="d-inline-block it-twitter"></i></a>
            <a href="https://www.linkedin.com/company/teamdigitale/" class="d-finline-lex small-prints mx-1 social__link"><i class="d-inline-block it-linkedin"></i></a>
          </div>
        </div>
      </div>
    </div>
    <!--/row-->

    <div class="row pb-4 colophon mt-md-5 mt-sm-3 pt-3 pt-sm-2">
      <ul class="col list-inline small">
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/privacy-policy/">Privacy policy</a></strong>
        </li>
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/cookies-policy">Cookie policy</a></strong>
        </li>
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/note-legali">Legal notes</a></strong>
        </li>
        
      </ul>
    </div>
  </div>
</footer>
  <script type="text/javascript">
var t = {
  this : "en",
  locale : "en_US",
  about_these_documents : "About these Documents",
  active_lang : "current language",
  cookiebar_accept : "Accept",
  cookiebar_msg : "We are using cookies to provide statistics that help us give you the best experience of our site. By continuing to use the site you are agreeing to our use of cookies.",
  cookiebar_privacy_policy : "Cookie policy",
  copyright : "Copyright",
  documents : "Documents",
  download : "Download",
  footer_link_privacy_policy : "Privacy policy",
  footer_link_cookies : "Cookie policy",
  footer_link_legal_notes : "Legal notes",
  go_to : "Go to",
  index : "Index",
  last_updated : "Last updated",
  most_viewed_this_month : "Most viewed this month",
  navigation_menu_label : "Navigation menu",
  navigation_menu_esc : "exit navigation",
  search : "Search",
  search_form_label : "Search in Document",
  search_form_off : "exit search form",
  search_form_on : "enter search form",
  search_form_start : "start searching",
  search_results : "Search Results",
  search_no_results : "Your search did not match any documents. Please make sure that all words are spelled correctly.",
  site_subtitle : "Public documents, made digital.",
  site_title : "Docs Italia",
  share_msg : "share",
  skiplinks_goto_content : "go to content",
  skiplinks_goto_navigation : "go to site navigation",
  toggle_menu_label : "go to navigation",
  version : "version",
  compare : "Compare",
  copy_link : "copy link",
  copied_link : "copied link",
  see_actions : "see actions",
  other_actions : "other actions",
  comments : "comments",
  back_to_text : "back to the text",
  glossary_empty : "information not found",
  glossary : "glossary",
  go_to_glossary : "vai al glossario",
  deepening : "deepening",
  example : "example",
  must : "must",
  must_not : "must not",
  should : "should",
  should_not : "should not",
  may : "may",
  use : "use",
  use_not : "don't use",
  consultation : "consultation",
  show_more : "show more",
  show_less : "show less",
  content_index : "content index",
  table_index : "table index",
  figures_index : "index of figures",
  figures : "figures",
  tables : "tables",
  contents : "contents",
  in_consultation : "in consultation",
  indices_and_glossary : "indices and glossary",
  note : "note",
  no_description : "no description",
  no_content : "no sections",
  no_glossary : "no glossary",
  no_figures : "no figures",
  no_tables : "no tables",
  summary : "summary",
  project : "Project",
  administration : "Administration",
  info : "About this document",
  related : "Related documents",
  actions : "Actions",
  tags : "Tags",
  view_source : "Source",
  previous : "previous",
  next : "next",
  in_collaboration_with : "in collaboration with",
  follow_us : "follow us on",
  header_link_trasformazione : "Piano Triennale",
  header_link_piattaforme : "Platforms",
  header_link_software : "Software",
  header_link_api : "API",
  header_link_community : "Communities",
  header_link_developers : "Developers",
  header_link_design : "Designers",
  header_link_tools : "Tools",
  header_link_forum : "Forum",
  header_link_docs : "Docs",
  header_link_github : "GitHub",
  header_link_projects : "Projects",
  header_link_documents : "Documents",
  header_link_administrations : "Administrations",
  header_link_whatis : "What is",
}
</script>
  <a href="#" aria-hidden="true" data-attribute="return-to-top" class="return-to-top">
  <i class="it-collapse"></i>
</a>
  
  <script type="text/javascript">
var PRODUCTION_DOMAIN = 'localhost';
var DOCSITALIA_DATA = {
  publisher_slug: 'organizzazione-demo',
  publisher_project_slug: 'progetto-demo'
}

LOCAL = true;
READTHEDOCS_DATA = {
  project: 'demo-document',
  version: 'bozza',
  language: 'it',
  api_host: '//' + PRODUCTION_DOMAIN
}

var DOCUMENTATION_OPTIONS = {
    URL_ROOT: './',
    VERSION: 'version: latest',
    LANGUAGE: 'en',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE: true,
    SOURCELINK_SUFFIX: '.txt'
};
</script>
<script src="_static/js/theme.js"></script>
<script type="text/javascript" src="_static/documentation_options.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/_sphinx_javascript_frameworks_compat.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
  
  <script type="text/javascript">
  <!-- Google analytics -->
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  $(document).ready(function() {
    var sendGaPageview = function() {
      ga('create', '', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
      
    };
    if ($.fn['cookiebar'].Constructor._getCookieEU()) {
      sendGaPageview();
    } else {
      $(document).on('close.bs.cookiebar', sendGaPageview);
    }
  });
  <!-- End Google analytics -->
  <!-- Matomo -->
  /*
  var _paq = _paq || [];
  _paq.push(['setSiteId', '']);
  (function () {
    var u = '//italia.piwikpro.com/';
    _paq.push(['setTrackerUrl', u + 'piwik.php']);
    var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
    g.type = 'text/javascript'; g.async = true; g.defer = true; g.src = u + 'piwik.js'; s.parentNode.insertBefore(g, s);
  })();

  $(document).ready(function() {
    var sendMatomoPageview = function() {
      _paq.push(['setDocumentTitle', document.domain + '/' + document.title]);
      _paq.push(['enableLinkTracking']);
      _paq.push(['setDoNotTrack', 1]);
      _paq.push(['trackPageView']);
    };
    if ($.fn['cookiebar'].Constructor._getCookieEU()) {
      sendMatomoPageview();
    } else {
      $(document).on('close.bs.cookiebar', sendMatomoPageview);
    }
  });*/
  <!-- End Matomo -->
</script>
  
    <div class="cookiebar bg-dark p-4 hide" aria-hidden="true">
  <div class="container">
    <div class="row d-flex align-items-center">
      <div class="col-12 col-md-7">
        <span class="text-white">We are using cookies to provide statistics that help us give you the best experience of our site. By continuing to use the site you are agreeing to our use of cookies.</span>
      </div>
      <div class="col-12 col-md-5 mt-2 mt-md-0 text-right">
        <a class="btn btn-link" href="/cookies-policy/">Cookie policy</a>
        <button class="btn btn-sm btn-primary mr-2" data-accept="cookiebar">Accept</button>
      </div>
    </div>
  </div>
</div>
  
  
  <div class="modal fade modal-sm-full" id="document-info" tabindex="-1" role="dialog" aria-labelledby="document-title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content rounded">
      <div class="modal-header">
        <h4 class="modal-title" id="document-title">Titolo del documento non impostato</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p></p>
        <p class="text-sans-serif">
          <i class="docs-icon-project font-weight-bold"></i>
          <span class="font-weight-bold ml-1 align-middle">Project:</span>
          <a href="/organizzazione-demo/progetto-demo" class="align-middle">
            Progetto demo
          </a>
        </p>
        <p class="text-sans-serif">
          <i class="docs-icon-publisher font-weight-bold"></i>
          <span class="font-weight-bold ml-1 align-middle">Administration:</span>
          <a href="/organizzazione-demo/" class="align-middle">
            Organizzazione demo
          </a>
        </p>
        <div class="d-flex text-sans-serif my-4">
          <div class="d-flex font-weight-bold align-items-center"><span class="mr-2">Tags:</span></div>
          <div class="d-flex flex-wrap">
            
            <span class="border border-primary rounded m-1 py-1 px-2 tag"><a href="#">demo</a></span>
            
            <span class="border border-primary rounded m-1 py-1 px-2 tag"><a href="#">docs italia</a></span>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="document-actions" aria-hidden="true">
  <div class="modal-dialog mt-5" role="document">
     <div class="modal-content rounded">
        <div class="modal-body p-1">
          <div class="document-actions d-flex flex-column flex-md-row justify-content-around w-100 p-2 p-md-0 text-blue">
  <div class="dropdown p-3 px-md-2 py-md-0 d-flex flex-wrap">
    <a class="btn dropdown-toggle p-2 flex-grow-1 text-left" href="#" id="downloads-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="docs-icon-download align-middle"></span>
      <span class="align-middle">Download</span>
    </a>
    <div class="dropdown-menu w-100" aria-labelledby="downloads-dropdown" aria-disabled="false">
      <div class="link-list-wrapper">
        <ul class="link-list">
          
        </ul>
      </div>
    </div>
  </div>
  
  
  
  <div class="p-3 px-md-2 py-md-0">
    <a href="#" role="button" class="btn p-2 disabled" aria-disabled="true">
        <span class="docs-icon-github"></span>
        <span class="align-middle">Source</span>
    </a>
  </div>
</div>
        </div>
     </div>
  </div>
</div>

  
</body>
</html>